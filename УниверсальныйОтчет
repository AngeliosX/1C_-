Процедура ПриКомпоновкеРезультата(ДокументРезультат, ДанныеРасшифровки, СтандартнаяОбработка)
	
	НаборДанных = СхемаКомпоновкиДанных.НаборыДанных.НаборДанных1;
	
	ТекстЗапроса = "";
	Для каждого Документ из Метаданные.Документы Цикл
		Если НЕ ТекстЗапроса = "" Тогда
			ТекстЗапроса = ТекстЗапроса + Символы.ПС + "
			|
			|ОБЪЕДИНИТЬ ВСЕ
			|";
		КонецЕсли;
		
		
		
		ТекстЗапроса = ТекстЗапроса + Символы.ПС + "
		|Выбрать
		|	Документ.Дата,
		|	""" + Документ.Имя + """ КАК ВидДокумента,
		|	Документ.Номер,
		|	" + ?(Документ.Реквизиты.Найти("Ответственный") = Неопределено, """""", "Документ.Ответственный") + " КАК Ответственный,
		|	Документ.Ссылка
		|ИЗ
		|	Документ." + Документ.Имя + " КАК Документ
		|ГДЕ
		|	ВЫБОР
		|			КОГДА &НачалоПериода = ДАТАВРЕМЯ(1, 1, 1)
		|				ТОГДА ИСТИНА
		|			ИНАЧЕ Документ.Дата > &НачалоПериода
		|		КОНЕЦ
		|	И ВЫБОР
		|			КОГДА &КонецПериода = ДАТАВРЕМЯ(1, 1, 1)
		|				ТОГДА ИСТИНА
		|			ИНАЧЕ Документ.Дата < &КонецПериода
		|		КОНЕЦ
		|";
	КонецЦикла;
	
	НаборДанных.Запрос = ТекстЗапроса;
	
	ПараметрДанных= КомпоновщикНастроек.Настройки.ПараметрыДанных.Элементы.Найти("НачалоПериода");
	ПараметрДанных.Значение = НачалоОтбора;
	ПараметрДанных.Использование=Истина;
	
	ПараметрДанных= КомпоновщикНастроек.Настройки.ПараметрыДанных.Элементы.Найти("КонецПериода");
	ПараметрДанных.Значение = ?(ЗначениеЗаполнено(КонецОтбора), КонецДня(КонецОтбора), КонецОтбора);
	ПараметрДанных.Использование = Истина;
	
	
КонецПроцедуры
